<!DOCTYPE html>

<html>

<body>


<shadow-test></shadow-test>
<script type="text/javascript">
    customElements.define('shadow-test', class extends HTMLElement {
      connectedCallback() {
        const shadow = this.attachShadow({ mode: 'open' });
        document.addEventListener('DOMContentLoaded', () => {
          const script = document.createElement('script')
          script.src = '%QuadPayJSUrl%'

          script.onload = function () {
            const modalOptions = {
              isMFPPMerchant: '%isMFPPMerchant%',
              learnMoreUrl: '%learnMoreUrl%',
              minModal: '%minModal%',
              isMobileSDK: 'true',
              hasFees: %hasFees%,
            }

            const merchantId = '%merchantId%'


            window.quadpay.insertModal(merchantId, modalOptions);

          }

          document.body.appendChild(script)
        })
      }
    });
  </script>
</body>

</html>
